<section *ngIf="showStateTable" class="info-pay-container animated fadeIn">
  <div class="info-pay-header">
    <button class="btn-close" (click)="dismiss()" aria-label="Cerrar">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
    <h1 class="info-pay-title">
      <span class="title-icon"></span>
      InformaciÃ³n de sus Ãºltimos pagos
    </h1>
  </div>

  <div class="info-pay-content" *ngIf="stateTableData && stateTableData.length > 0">
    <div class="balance-card">
      <div class="balance-label">Saldo disponible</div>
      <div class="balance-amount">
        <span class="amount-value">{{saldoMounted | currency:'VES':'symbol':'1.2-2'}}</span>
        <span class="amount-status" [class.favor]="saldoReal < 0" [class.pagar]="saldoReal >= 0">
          {{ saldoReal < 0 ? 'a favor' : 'a pagar'}}
        </span>
      </div>
    </div>

    <div class="transactions-container">
      <div class="transactions-header">
        <div class="header-cell date-header">Fecha</div>
        <div class="header-cell receipt-header">Comprobante</div>
        <div class="header-cell status-header">Estado</div>
      </div>

      <div class="transactions-list">
        <div *ngFor="let item of stateTableData; let i = index; trackBy: trackByIndex" class="transaction-item" [class.even]="i % 2 === 0">
          <div class="transaction-cell date-cell" data-label="Fecha">
            <span class="date-icon">ğŸ“…</span>
            <span class="date-value">{{item.fecha_reg | date: 'dd/MM/yyyy'}}</span>
          </div>
          <div class="transaction-cell receipt-cell" data-label="Comprobante">
            <span class="receipt-value">{{item.numero_ref}}</span>
          </div>
          <div class="transaction-cell status-cell" data-label="Estado">
            <span class="status-badge" 
                  [class.status-processed]="item.status_pd === 'PROCESADO'"
                  [class.status-rejected]="item.status_pd === 'RECHAZADO'"
                  [class.status-registered]="item.status_pd === 'REGISTRADO'">
              <span class="status-icon" *ngIf="item.status_pd === 'PROCESADO'">âœ“</span>
              <span class="status-icon" *ngIf="item.status_pd === 'RECHAZADO'">âœ—</span>
              <span class="status-icon" *ngIf="item.status_pd === 'REGISTRADO'">â±</span>
              {{item.status_pd}}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="!stateTableData || stateTableData.length === 0">
    <div class="empty-icon">ğŸ“‹</div>
    <h3 class="empty-title">No tienes pagos para mostrar</h3>
    <p class="empty-message">AÃºn no has realizado ningÃºn pago registrado.</p>
  </div>
</section>
