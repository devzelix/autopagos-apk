.pinpad-container {
  text-align: center;
  display: flex;
}

.pinpad-container.virtual-keyboard-fixed {
  width: 100%;
  max-width: 820px;
  padding: 0 0.6rem;
}

.pinpad {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.4rem;
  // max-width: 250px;
  // margin: 20px auto;
  padding-right: 1rem;
  margin: auto;

}

.pinpad button {
  all: unset;
  font-size: 24px;
  cursor: pointer;
  box-sizing: border-box;
  border: 1;
  border-color: gray;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent; // Eliminar highlight nativo de Android
  -webkit-touch-callout: none; // Prevenir menú contextual en iOS/Android
  // background-color: transparent;
  border-radius: 50%;
  flex-direction: column;
  place-content: center;
  align-items: center;
  display: flex;
  margin: auto;
  max-width: 4.2rem;
  max-height: 4.2rem;
  width: 4.2rem;
  height: 4.2rem;
  padding: 0;
  border: 0;
  overflow: hidden;

  // Fibex Style
  background: linear-gradient(135deg, #215288 0%, #2d7bc2 100%);
  box-shadow: 0 8px 15px -4px rgba(33, 82, 136, 0.4);
  font-family: 'Poppins', sans-serif;
  font-weight: 600;

  overflow: hidden;
  color: white;
  backdrop-filter: blur(17px);
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  user-select: none !important;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  will-change: transform, background-color; // Optimización para Android

  &:active,
  &:hover,
  &.keyboard-active {
    background: linear-gradient(135deg, #1a426d 0%, #2566a3 100%);
    transform: translateY(-2px);
    box-shadow: 0 12px 20px -4px rgba(33, 82, 136, 0.5);
  }

  // Prevenir estados "stuck" en Android
  &:focus {
    outline: none;
  }

  // Optimización para dispositivos táctiles
  @media (hover: none) and (pointer: coarse) {
    &:active {
      transform: scale(0.95);
    }
  }
}

// RESPONSIVE SIZING
@media (max-width: 600px),
(max-height: 750px) {
  .pinpad {
    gap: 0.5rem; // Gap reducido
  }

  .pinpad button {
    font-size: 1.2rem;
    max-width: 3.5rem;
    max-height: 3.5rem;
    width: 12vw; // Ancho fluido
    height: 12vw; // Alto fluido cuadrado
  }

  // Ajuste botón borrar
  .pinpad button.btn-wide {
    height: 3.5rem !important;
  }
}

// Pantallas MUY cortas (Landscape o telefonos pequeños)
@media (max-height: 600px) {
  .pinpad button {
    max-width: 3rem;
    max-height: 3rem;
    width: 10vw;
    height: 10vw;
    font-size: 1rem;
  }

  .pinpad button.btn-wide {
    height: 3rem !important;

    svg {
      font-size: 1.5rem;
    }
  }
}

.pinpad-container.pinpad-big-size {
  .pinpad {
    gap: 0.8rem;

    button {
      max-width: 6rem;
      max-height: 6rem;
      width: 6rem;
      height: 6rem;

      @media (max-width: 850px) {
        max-width: 5rem;
        max-height: 5rem;
        width: 5rem;
        height: 5rem;
      }

      @media (max-height: 700px) {
        max-width: 3.5rem;
        max-height: 3.5rem;
        width: 3.5rem;
        height: 3.5rem;
      }
    }
  }
}

// Estilo para el botón ancho 'Borrar'
.pinpad button.btn-wide {
  grid-column: span 2;
  width: 100% !important;
  max-width: 100% !important;
  height: 4.2rem;
  border-radius: 99px;
  display: flex !important;
  flex-direction: row;
  gap: 0.5rem;
  font-size: 1.2rem;
  text-transform: uppercase;
  letter-spacing: 1px;

  // Red Gradient Style for Delete Button
  background: linear-gradient(135deg, #d32f2f 0%, #ef5350 100%);
  box-shadow: 0 8px 15px -4px rgba(211, 47, 47, 0.4);

  &:active,
  &:hover,
  &.keyboard-active {
    background: linear-gradient(135deg, #b71c1c 0%, #c62828 100%);
    box-shadow: 0 12px 20px -4px rgba(211, 47, 47, 0.5);
  }

  svg {
    font-size: 2rem;
  }
}

.pinpad-container.pinpad-big-size .pinpad button.btn-wide {
  width: 100% !important;
  max-width: 100% !important;
  height: 6rem !important;

  @media (max-height: 700px) {
    height: 3.5rem !important;
  }
}

// ==========================================
// MOBILE OPTIMIZATION (COMPACT KEYPAD)
// ==========================================

@media (max-width: 480px) {
  .pinpad-container.pinpad-big-size {
    margin-top: 0 !important;

    .pinpad {
      gap: 0.5rem !important;

      button {
        width: 4rem !important;
        height: 4rem !important;
        max-width: 17vw !important;
        max-height: 17vw !important;
        font-size: 1.3rem !important;
        box-shadow: 0 4px 10px -2px rgba(33, 82, 136, 0.3);
      }

      button.btn-wide {
        height: 3.2rem !important;
        border-radius: 50px;
        font-size: 0.9rem !important;

        svg {
          font-size: 1.4rem !important;
        }
      }
    }
  }

  @media (max-height: 650px) {
    .pinpad-container.pinpad-big-size .pinpad button {
      width: 3.2rem !important;
      height: 3.2rem !important;
      font-size: 1.1rem !important;
    }
  }
}